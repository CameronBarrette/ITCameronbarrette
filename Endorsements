<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Endorsements | Cameron Barrette</title>

    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="./style.css">
</head>

<body>

<header class="top-banner">
    <div class="left">
        <img src="me.jpg.webp" alt="Cameron Barrette" class="profile-pic">
    </div>
    <div class="center">Cameron Barrette | IT & CyberSecurity</div>
    <div class="right">
        <a href="https://www.linkedin.com/in/cameron-barrette-it/" target="_blank" class="top-link">
            LinkedIn
        </a>
    </div>
</header>

<div class="main-layout">

    <nav class="sidebar">
        <a href="index.html">Home</a>
        <a href="about.html">About Me</a>
        <a href="projects.html">Projects</a>
        <a href="certifications.html">Certifications</a>
        <a href="resume.html">Resume</a>
        <a href="endorsements.html">Endorsements</a>
        <a href="contact.html">Contact</a>
    </nav>

    <div class="content">

        <h1>Leave an Endorsement</h1>

        <div class="endorsement-form">
            <input id="name" placeholder="Your Name">
            <input id="contact" placeholder="Email or Phone (optional)">
            <textarea id="comment" placeholder="Your endorsement"></textarea>
            <button onclick="addComment()" class="download-btn">Submit</button>
        </div>

        <hr><br>

        <h2>What People Are Saying</h2>
        <div id="comments"></div>

    </div>

</div>

<style>
/* ---------- FORM STYLING ---------- */
.endorsement-form input,
.endorsement-form textarea {
    width: 100%;
    padding: 12px;
    margin-bottom: 15px;
    font-family: 'Inter', sans-serif;
    font-size: 16px;
}

/* ---------- COMMENTS ---------- */
.comment-card {
    background: #f3f3f3;
    padding: 15px;
    border-radius: 8px;
    margin-bottom: 15px;
}

/* ---------- MOBILE FIX ---------- */
@media (max-width: 768px) {
    .endorsement-form input,
    .endorsement-form textarea {
        font-size: 14px;
    }

    .comment-card {
        font-size: 14px;
    }
}
</style>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getFirestore, collection, addDoc, getDocs, deleteDoc, doc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyBksnr8qDgjAhwPQSK73M10doQwHPU6aoc",
  authDomain: "portfolio-cb9aa.firebaseapp.com",
  projectId: "portfolio-cb9aa",
  storageBucket: "portfolio-cb9aa.firebasestorage.app",
  messagingSenderId: "1005509574520",
  appId: "1:1005509574520:web:285a432471025fa506128d",
  measurementId: "G-6SX1C69ZEW"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

window.addComment = async function () {
    const name = document.getElementById("name").value;
    const contact = document.getElementById("contact").value;
    const comment = document.getElementById("comment").value;

    await addDoc(collection(db, "endorsements"), { name, contact, comment });
    location.reload();
};

async function loadComments() {
    const querySnapshot = await getDocs(collection(db, "endorsements"));
    const commentsDiv = document.getElementById("comments");

    querySnapshot.forEach((docSnap) => {
        const data = docSnap.data();

        const div = document.createElement("div");
        div.className = "comment-card";
        div.innerHTML = `
            <strong>${data.name}</strong><br>
            ${data.comment}<br>
            <em>${data.contact || ""}</em><br><br>
            <button onclick="deleteComment('${docSnap.id}')" class="download-btn">Delete</button>
        `;
        commentsDiv.appendChild(div);
    });
}

window.deleteComment = async function (id) {
    await deleteDoc(doc(db, "endorsements", id));
    location.reload();
};

loadComments();
</script>

</body>
</html>
